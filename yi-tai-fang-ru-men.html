<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
Design by Free CSS Templates
http://www.freecsstemplates.org
Released for free under a Creative Commons Attribution 2.5 License

Name       : Brown Stone  
Description: A two-column, fixed-width design with dark color scheme.
Version    : 1.0
Released   : 20100928

-->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>以太坊入门</title>
<link href="https://blog.pygod.vip/theme/css/style.css" rel="stylesheet" type="text/css" media="screen" />
<link href="https://blog.pygod.vip/" type="application/atom+xml" rel="alternate" title="博客 ATOM Feed" />
</head>
<body>
<div id="wrapper">
	<div id="page">
		<div id="page-bgtop">
			<div id="page-bgbtm">
    
                        	<div id="content">
					<div class="post">
						<h2 class="title"><a href="yi-tai-fang-ru-men.html">以太坊入门</a></h2>
						<p class="meta"><span class="date">Le 2020-11-28 10:30:00 </span><span class="posted">Par <a href="#">hanf</a></span><span>&nbsp; | Catégorie : <a href="https://blog.pygod.vip/category/ethereum.html">Ethereum</a></span></p>
					<p class="meta">Tags : <span><a href="https://blog.pygod.vip/tag/qu-kuai-lian.html">区块链</a> / </span>
<span><a href="https://blog.pygod.vip/tag/ethereum.html">ethereum</a> / </span>
</p>	
						<div style="clear: both;">&nbsp;</div>
						<div class="entry">
						 <h1>区块链发展</h1>
<p>比特币（1.0） -&gt; 以太坊（2.0） -&gt; （3.0）</p>
<blockquote>
<p>2008年：比特币，区块链1.0，简单记账
2014年：以太坊，区块链2.0，智能合约
2017~ ：EOS,IOTA，区块链3.0，高性能，大吞吐量，开发者友好，用户友好</p>
</blockquote>
<h1>以太坊发展阶段</h1>
<h2>前沿</h2>
<p>以太坊初始阶段，时间为2015年7月30日~2016年3月</p>
<h2>家园</h2>
<p>以太坊第二阶段，与2016年3月推出</p>
<h2>大都会</h2>
<p>以太坊第三阶段，于2017年10月推出的“拜占庭”</p>
<h2>宁静</h2>
<h1>重大分叉</h1>
<ul>
<li>Ice Age：引入指数难度增加的硬分叉，促使向proof-of-stake过渡</li>
<li>The DAO：扭转了被攻击的DAO合约并导致以太坊和以太坊经典分裂成两个竞争系统的硬分叉。<blockquote>
<p>因为被黑客攻击，而不得不重新硬分叉出一个分支，还保留原来的记录的，叫做<strong><em>“以太坊经典 - etc”</em></strong>  </p>
</blockquote>
</li>
<li>Tangerine Whistle：改变某些IO运算的gas计算，并从拒绝服务攻击中清除积累状态，该攻击利用了这些操作的低gas成本</li>
<li>Spurious Dragon：一个解决更多拒绝服务攻击媒介的硬分叉，以及另一种状态清除。此外，还有重放攻击保护机制</li>
</ul>
<h1>发展现状</h1>
<p>合约数：xxx个
地址数：xxx个</p>
<h1>以太坊特点</h1>
<ul>
<li>世界计算机，它是一个开源的/全球分布的计算基础设施</li>
<li>执行 <strong>智能合约</strong> 的程序</li>
<li>使用区块链来 <strong>同步</strong> 和 <strong>存储</strong> 系统状态以及名为 <strong>以太币</strong> 的加密货币，以 <strong>计量</strong> 和 <strong>约束</strong> 执行资源成本</li>
<li>本质是一个基于交易的状态机</li>
<li>以太坊平台 使开发人员能够构建具有内置经济功能的强大 <strong>去中心化应用程序（DApp）</strong>；在持续自我正常运行的同时，还减少和消除了审查，第三方界面和交易对手的风险</li>
</ul>
<h1>以太坊的组成成分</h1>
<ul>
<li>P2P网络<br>
以太坊在以太坊主网络上运行，该网络可在TCP端口30303上寻址，并运行一个协议。  </li>
<li>交易（Transaction）<br>
以太坊交易是网络消息，其中包括 <strong>发送者（sender），接收者（receiver），值（value），数据的有效载荷（payload）</strong>  </li>
<li>以太坊虚拟机（EVM)<br>
以太坊状态转换由以太坊虚拟机（EVM）处理，一个 <strong><em>基于堆栈的 执行字节码的</em></strong> 虚拟机。  </li>
<li>数据库(Blockchain）<br>
以太坊区块链作为数据库（通常是LevelDB)）本地存储在每个节点上，包含 <strong><em>序列化后的交易</em></strong> 和 <strong><em>系统状态</em></strong>  </li>
<li>客户端<br>
以太坊有几种可互操作的客户端软件实现，最突出的是 <strong><em>Go-Ethereum（Geth） 和 Parity</em></strong>  </li>
</ul>
<h1>以太坊中的重要概念</h1>
<h2>账户（Account）</h2>
<p>包含</p>
<blockquote>
<ul>
<li>地址</li>
<li>余额</li>
<li>随机数</li>
<li>可选的存储对象</li>
<li>可选的代码对象</li>
</ul>
</blockquote>
<p>普通账户（EOA）：存储和代码均为空<br>
合约账户（Contract）：包含存储和代码</p>
<h2>地址（Address）</h2>
<p>一般来说，是一个 <strong><em>EOA 或者 合约</em></strong>，它可以在区块链上 <strong><em>接收或者发送交易</em></strong>。<br>
更具体的说，它是ECDSA公钥的keccak散列的最右边的160位。  </p>
<h2>交易（Transaction）</h2>
<blockquote>
<ul>
<li>可以发送以太币和信息</li>
<li>向合约发送交易可以调用合约代码，并以信息数据为函数参数</li>
<li>向空用户发送信息，可以自动生成以信息为代码块的合约账户</li>
</ul>
</blockquote>
<h2>gas</h2>
<p>以太坊用于执行智能合约的虚拟燃料。<br>
以太坊虚拟机使用核算机制来衡量gas的消耗量，并限制计算资源的消耗。<br>
gas可以简单理解为手续费，但不完全等于手续费。  </p>
<h3>gas背景</h3>
<p><strong>图灵机</strong>  </p>
<blockquote>
<p>图灵机就是指一个抽象的机器，它有一条无限长的纸带，纸带分成了一个一个的小方格，每个方格有不同的颜色。有一个机器头在纸带上移来移去。机器头有一组内部状态，还有一些固定的程序。在每个时刻，机器头都要从当前纸带上读入一个方格信息，然后结合自己的内部状态查找程序表，根据程序输出信息到纸带方格上，并转换自己的内部状态，然后进行移动。</p>
</blockquote>
<p><strong>图灵完备</strong>  </p>
<blockquote>
<p>一个系统可以模拟任何图灵机，该系统就被定义为“图灵完备”，而以太坊虚拟机可以实现图灵完备。  </p>
</blockquote>
<h3>gas由来</h3>
<p>因为以太坊可以实现图灵完备，即可以实现“无限循环”。而以太坊要作为“世界计算机”，在打包区块的时候并不能知道里面有没有无限循环，所以提出gas的概念。  </p>
<blockquote>
<p>gas limit会限制程序运行
gas手续费</p>
</blockquote>
<h1>以太坊的货币</h1>
<p>ether：以太，或者叫以太币<br>
ethereum：以太坊，一个大的系统  </p>
<h2>以太币发行规则</h2>
<h3>挖矿前（Pre-Mine）</h3>
<blockquote>
<p>2014年7/8月间，为了众筹发行了7200w 以太币。<br>
众筹之后，每年产量基本稳定，被限制不超过7200w的25%。</p>
</blockquote>
<h3>挖矿产出（Mining）</h3>
<blockquote>
<h4>区块奖励（block reward）</h4>
<blockquote>
<p>每产生一个新区块就会有一笔固定的奖励给矿工，初始是5个以太币  </p>
</blockquote>
<h4>叔块奖励（uncle reward）</h4>
<blockquote>
<p>有些区块被挖的稍微晚一些，不能作为主区块链的组成部分。<br>
比特币和以太币的处理方式不同。<br>
比特币：称之为<strong><em>孤块</em></strong>，并且 <strong><em>完全舍弃</em></strong> 它们。
以太币：称之为<strong><em>叔块</em></strong>，并且在之后的区块中，可以<strong><em>引用</em></strong>他们。如果叔块在之后的区块链中被引用，每个叔块会为挖矿者产出区块奖励的 <strong><em>7/8</em></strong> 。称之为 <strong><em>叔块奖励</em></strong>。   </p>
</blockquote>
<h4>叔块引用奖励（uncle referencing reward）</h4>
<blockquote>
<p>矿工每引用一个叔块，可以得到去看看奖励的 <strong><em>1/32</em></strong> 作为奖励（<strong><em>最多引用两个叔块</em></strong>）  </p>
</blockquote>
<p>以上的一套基于pow的奖励机制，称为以太坊 <strong>幽灵协议</strong></p>
</blockquote>
<h3>产量未来变化</h3>
<blockquote>
<p>以太坊出块机制从 <strong><em>工作量证明（pow）</em></strong> 转为 <strong><em>股权证明（pos）</em></strong> 后，以太币的发行有什么变化尚无定论。<br>
pos使用casper协议，在casper协议下，以太币的发行率将大大低于目前幽灵（ghost）协议下的发行率。</p>
</blockquote>
<h2>以太坊区块收入</h2>
<blockquote>
<h3>普通区块收入</h3>
<ul>
<li>固定奖励（挖矿奖励），每个普通区块都有</li>
<li>区块内包含的所有程序的gas花费的总和</li>
<li>如果普通区块引用了叔块，每个引用一个叔块可以得到固定奖励的1/32</li>
</ul>
<h3>叔块收入</h3>
<p>叔块收入只有一项，就是叔块奖励，计算公司为：<br>
<code>叔块奖励 = （叔块高度 - 引用叔块的区块高度 + 8） * 普通区块奖励/8</code><br>
<strong>离的越近，奖励越多</strong></p>
</blockquote>
<h1>幽灵（GHOST）协议</h1>
<h2>背景</h2>
<p>比特币10分钟出一个块，而一个广播到全网大概需要12秒，以太坊为了将交易确认时间控制在一个合理范围，参考这个12秒，将以太坊出块的实际设计为12秒。<br>
虽然12秒很快了，但是负面影响也随之而来。比如：  </p>
<blockquote>
<p>A，B在0秒同时挖<br>
A在2秒时挖出来了，然后广播给全网后，在第3秒就开始挖下一个块<br>
在经过4秒的网络传输后，B收到了A的广播，此时（第6秒）B放弃当前挖矿，在A的新块上重新挖<br>
就是第二轮开始挖矿的时间：A是第二秒，B是第6秒<br>
在以太坊出块速度只有12秒的情况下，4秒的提前还是会给A带来很大的优势的，<br>
长久下去，出块的概率必然是A越来越大，B越来越小，如此A就成了一个中心，就成了中心化了<br>
<strong>幽灵协议</strong>由此而来！</p>
</blockquote>
<h2>介绍</h2>
<p>Greedy Heaviest Observed SubTree，“GHOST”</p>
<blockquote>
<p>工作量证明时，不仅仅考虑当前块的租块，还要考虑叔块<br>
叔块引用做多7层<br>
叔块获得7/8的奖励，“侄子块”获得1/32的奖励。  </p>
</blockquote>
<h1>去中心化应用(DAPP)</h1>
<ul>
<li>基于以太坊可以创建<strong>只能合约</strong>来构建<strong>去中心化应用(Decentralized Application)</strong>。  </li>
<li>以太坊的构想是成为<strong>DApps</strong>编程开发的平台</li>
<li>DApp至少由以下组成：<blockquote>
<ol>
<li>区块链上的只能合约</li>
<li>Web前端用户界面</li>
</ol>
</blockquote>
</li>
</ul>
<h1>以太坊应用</h1>
<ul>
<li>基于以太坊创建的加密货币（各种空气币）  </li>
<li>基于以太坊创建域名注册系统/博彩系统  </li>
<li>基于以太坊开发去中心化的游戏，比如2017年的 <strong>以太猫</strong>（CryptoKitties，最高单只售价80w美元）  </li>
</ul>
<h1>代币（TOKEN）</h1>
<ul>
<li>代币（token）也称作通证，代表有所有权的资产/货币/权限等在区块链上的抽象。  </li>
<li>可替代性通证（fungible token），erc20，基于区块链技术发行的，相互可替代的，可以接近无线拆分的token。如：EOS等一些虚拟货币  </li>
<li><strong>非同质通证（non-fungible token）</strong>，erc721，基于区块链技术发行的，唯一不可替代的，大多数情况下不可拆分的token。如：以太猫。  </li>
</ul>
<h1>名词解释</h1>
<ul>
<li><strong>EIP</strong>：Ethereum Improvement Proposals，以太坊改进建议  </li>
<li><strong>ERC</strong>：Ethereum Request for Comments，以太坊征求意见。一些EIP被标记为ERC，表示试图当月以太坊使用的特定标准的提议  </li>
<li><strong>EOA</strong>：External Owned Account，外部账户。由以太坊网络的人类用户创建的账户  </li>
<li><strong>Ethash</strong>：以太坊1.0的工作量证明算法。  </li>
<li><strong>HD钱包</strong>：使用分层确定性（HD protocol）密钥创建和转账协议（BIP32）的钱包  </li>
<li><strong>Keccak256</strong>：以太坊中使用的密码哈希函数。Keccak256被标准化为SHA-3   </li>
<li><strong>Nonce</strong>：在密码学中，术语nonce用于指代只能使用一次的值。以太坊使用两种类型的随机数，<strong>账户随机数</strong> 和 <strong>POW随机数</strong>  </li>
</ul>	
						</div>
					</div>
			      
					<div style="clear: both;">&nbsp;</div>
                                        <div class="post">
                                        <h2 class="title">Commentaires !</h2>
                                            <div id="disqus_thread"></div>
                                            <script type="text/javascript">
                                               var disqus_identifier = "yi-tai-fang-ru-men.html";
                                               (function() {
                                               var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                                               dsq.src = 'https://disqus_ca3p2R4hDP.disqus.com/embed.js';
                                               (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                                              })();
                                            </script>
                                        </div>
				</div>
				<!-- end #content -->
				<div id="sidebar">
					<div id="logo">
						<h1><a href="https://blog.pygod.vip">博客</a></h1>
					</div>
					<div id="menu">
						<ul>
							<li ><a href="https://blog.pygod.vip">Home</a></li>
							<li ><a href="https://blog.pygod.vip/archives.html">Archives</a></li>
						</ul>
					</div>
					<ul>
						<li>
							<h2>Catégories</h2>
							<ul>
								 <li ><a href="https://blog.pygod.vip/category/debug.html">debug</a></li>
								 <li ><a href="https://blog.pygod.vip/category/docker.html">Docker</a></li>
								 <li class="active"><a href="https://blog.pygod.vip/category/ethereum.html">Ethereum</a></li>
								 <li ><a href="https://blog.pygod.vip/category/jing-yan.html">经验</a></li>
								 <li ><a href="https://blog.pygod.vip/category/wang-luo.html">网络</a></li>
								 <li ><a href="https://blog.pygod.vip/category/web3py.html">web3py</a></li>
								 <li ><a href="https://blog.pygod.vip/category/yu-fa.html">语法</a></li>
							</ul>
						</li>
						<li>
							<h2>Blogroll</h2>
							<ul>
                                                            <li><a href="https://getpelican.com/">Pelican</a></li>
                                                            <li><a href="https://www.python.org/">Python.org</a></li>
                                                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                                                            <li><a href="#">You can modify those links in your config file</a></li>
							</ul>
						</li>
                                                <li>
                                                        <h2>Social</h2>
                                                        <ul>
                                                            <li><a href="https://blog.pygod.vip/" rel="alternate">Flux Atom</a></li>
                                                            <li><a href="#">You can add links in your config file</a></li>
                                                            <li><a href="#">Another social link</a></li>
                                                        </ul>
                                                </li><!-- /.social -->
						<li>
						        <h2>Tags</h2>
						        <ul>
                                                                <li><a href="https://blog.pygod.vip/tag/debug.html">debug</a></li>
                                                                <li><a href="https://blog.pygod.vip/tag/jing-yan.html">经验</a></li>
                                                                <li><a href="https://blog.pygod.vip/tag/wang-luo.html">网络</a></li>
                                                                <li><a href="https://blog.pygod.vip/tag/tcp.html">tcp</a></li>
                                                                <li><a href="https://blog.pygod.vip/tag/qu-kuai-lian.html">区块链</a></li>
                                                                <li><a href="https://blog.pygod.vip/tag/ethereum.html">ethereum</a></li>
                                                                <li><a href="https://blog.pygod.vip/tag/zhi-neng-he-yue.html">智能合约</a></li>
                                                                <li><a href="https://blog.pygod.vip/tag/web3.html">web3</a></li>
                                                                <li><a href="https://blog.pygod.vip/tag/solidity.html">solidity</a></li>
                                                                <li><a href="https://blog.pygod.vip/tag/markdown.html">markdown</a></li>
                                                                <li><a href="https://blog.pygod.vip/tag/docker.html">docker</a></li>
						        </ul>
						</li>
						
						
					</ul>
				</div>
				<!-- end #sidebar -->
				<div style="clear: both;">&nbsp;</div>
			</div>
		</div>
	</div>
	<!-- end #page -->

<div id="footer">
	<p>Copyright (c) 2008 Sitename.com. All rights reserved. Design by <a href="http://www.freecsstemplates.org/">CSS Templates</a>.</p>
	<p>Proudly powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>, which takes great advantages of <a href="http://python.org">python</a>.
</p>
</div>
<!-- end #footer -->
</body>
</html>